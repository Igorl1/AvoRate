<!DOCTYPE html>
<html lang="pt-BR">
  <head>
    {% include 'tracker/header.html' %}
    <title>
      AvoRate -
      {% if item is defined %}Editar item{% else %}Adicionar item{% endif %}
    </title>
  </head>
  <body>
    {% include 'tracker/global_links.html' %}

    <main class="page-container">
      <section class="card">
        
        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1rem;">
            <a href="{{ url_for('tracker.home') }}" class="btn-ghost">
            ‚Üê Back to dashboard
            </a>
            <h1 class="page-title" style="margin: 0;">Editing "{{ media.title }}"</h1>
        </div>

        <form class="form" method="POST" action="{{ url_for('tracker.edit_media', media_id=media.id) }}">
          
          <div class="form-field">
            <label for="title">Title</label>
            <input
              id="title"
              name="title"
              type="text"
              required
              value="{{ media.title }}"
            />
          </div>

          <div class="form-row-inline">
            <div class="form-field">
              <label for="media_type">Type</label>
              <select id="media_type" name="media_type">
                <option value="">Select Type</option>
                {% for value, label in media_types %}
                <option
                  value="{{ value }}"
                  {% if media.mediaType and media.mediaType.value == value %}selected{% endif %}
                >
                  {{ label }}
                </option>
                {% endfor %}
              </select>
            </div>

            <div class="form-field">
              <label for="status">Status</label>
              <select id="status" name="status">
                <option value="">Select Status</option>
                {% for value, label in status_choices %}
                <option
                  value="{{ value }}"
                  {% if media.status and media.status.value == value %}selected{% endif %}
                >
                  {{ label }}
                </option>
                {% endfor %}
              </select>
            </div>
          </div>

          <div class="form-row-inline">
            <div class="form-field">
              <label for="rating">Rating</label>
              <select id="rating" name="rating">
                <option value="">No Rating</option>
                {% for value, label in rating_choices %}
                <option
                  value="{{ value }}"
                  {% if media.rating == value %}selected{% endif %}
                >
                  {{ label }}
                </option>
                {% endfor %}
              </select>
            </div>
          </div>

          <div class="form-field">
            <label for="review">Description</label>
            <textarea
              id="review"
              name="description"
              rows="5"
            >{{ media.description or '' }}</textarea>
          </div>

          <div class="form-actions">
            <button type="submit" class="btn-primary">
              Save Changes
            </button>
            
            <a href="{{ url_for('tracker.delete_media', media_id=media.id) }}" class="btn-danger" style="text-decoration: none; text-align: center;">
              Delete
            </a>
          </div>
        </form>
      </section>
    </main>
  </body>
</html>